% Add document class and packages
\documentclass[12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{geometry}
\geometry{margin=1in}
\usepackage{hyperref}
\usepackage{amsmath,amssymb}
\usepackage{graphicx}

% Whitepaper Title & Abstract
\title{Secret Raffle: A Privacy-Preserving Lottery dApp on Secret Network}
\author{Henry Borthwick \\ COSC 473 Term Project 2025}
\date{\today}

\begin{document}
\maketitle

\begin{abstract}
Public blockchain raffles typically expose every ticket purchase and rely on off-chain scripts to choose winners, eroding both participant privacy and trust in the outcome.  We present \emph{Secret Raffle}, a fully on-chain, end-to-end verifiable lottery built with CosmWasm and deployed on the Secret Network.  Our smart-contract architecture segregates privileges (admin \emph{vs.} player) and leverages Secret Network's encrypted state to hide individual ticket balances while escrow-ing the pot in native \texttt{uSCRT}.  After a configurable end-time the contract derives pseudo-randomness from the encrypted block seed to deterministically select a winner proportional to ticket holdings.  The winner can atomically claim the prize and, using a viewing-key permit, privately retrieve a hidden \emph{secret phrase}â€”a mechanic that can serve as a redemption code or proof-of-win in downstream experiences.

A React/TypeScript front-end built with Vite and SecretJS abstracts wallet connection, ticket purchase, and results display into three intuitive clicks.  End-to-end tests executed on pulsar-3 testnet demonstrate a \textless200 kGas ticket purchase, \textless300 kGas winner selection, and successful prize payouts for up to \(10^{6}\) tickets without overflow.  These results validate that privacy-preserving raffles can be delivered with minimal contract complexity while retaining familiar user-experience patterns.  The project serves as a blueprint for more sophisticated, fair-chance games and fund-raising mechanisms in the Cosmos ecosystem.
\end{abstract}

% The remainder of the whitepaper continues below ...

\section*{Problem Statement \& Motivation}

\subsection*{Centralised Raffles: A Broken Trust Model}
Traditional online raffles --- whether used for charity fund-raising, community giveaways, or customer engagement campaigns --- are almost always operated by a central authority who (1) collects entry fees, (2) draws a winner off-chain, and (3) promises to distribute the prize.  Participants must blindly trust that the organiser will not tamper with the draw, exclude entries, or walk away with the pot.  Even projects that migrate ticket sales on-chain (e.g. a0Ethereum ERC-20 based lotteries) still expose a major weakness: every purchase is publicly traceable, so whales can copy trade large entries, and winner selection typically relies on external random-number services or opaque scripts.

\subsection*{The Need for Verifiable \emph{and} Private Lotteries}
Communities and creators increasingly want ways to raise funds or distribute rewards in a manner that is both provably fair \emph{and} respectful of participants' privacy.  A transparent contract is essential for auditability, yet publishing every wallet's ticket balance can deter users who prefer to keep spending habits or donation sizes confidential.  Likewise, sourcing randomness a0must not introduce new trust assumptions or central points of failure.

\subsection*{Why Secret Network + CosmWasm?}
Secret Network brings encrypted contract state and compute to the Cosmos ecosystem.  By storing ticket counts and the raffle's secret phrase inside the Trusted Execution Environment (TEE), our \emph{Secret Raffle} contract simultaneously delivers:

\begin{itemize}
  \item \textbf{Privacy:} Individual ticket balances are hidden from everyone except the rightful owner, revealed only through permissioned queries (\texttt{Permit}) after wallet signature.
  \item \textbf{Trustless Funds Escrow:} All \texttt{uSCRT} payments are held by the contract; payout executes atomically when the winner calls \texttt{claim\_prize}.  No organiser custody is ever required.
  \item \textbf{On-chain Randomness:} The contract derives a pseudo-random seed from Secret Network's encrypted block entropy, eliminating reliance on third-party VRF services.
  \item \textbf{Role-based Access Control:} Only the admin can configure and start the raffle, while any user may purchase tickets; only the selected winner can claim the pot.
\end{itemize}

These properties address both fairness and privacy gaps in existing lottery implementations, providing a robust fund-raising primitive that communities can trust without sacrificing anonymity.

\end{document}
